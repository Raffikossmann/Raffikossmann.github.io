
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Adlerweg-Etappe 11: Karwendelhaus – Hallerangerhaus </title>

    <link rel="stylesheet" href="js/leaflet/leaflet.css" />
	<link rel="stylesheet" href="js/leaflet-elevation/leaflet.elevation-0.0.4.css" />
	
    <script src="js/leaflet/leaflet.js"></script>
	<script src="js/leaflet-omnivore/leaflet-omnivore.js"></script>
	<script src="js/leaflet-elevation/leaflet.elevation-0.0.4.min.js"></script>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

    <style>
        body {
            padding: 0px;
            margin: 0px;
			text-align: center;
        }
		h1 {
		    color: white;
			background-color: black;
			text-align: center;
		}
		div {
		      display: block;
              margin-left: auto;
              margin-right: auto
		}
        html, body, {
            height: 100vh;
            width: 100vw;
        }
		#map {
			float: center;
			height: 600px;
			width: 1024px;
			border: 1px solid black;
		}
    </style>
</head>

<body>
	<h1> Adlerweg-Etappe 11: Karwendelhaus – Hallerangerhaus</h1>
	<p>Hinauf in höchste Höhen führt die alpinistisch anspruchsvollste Adlerweg-Etappe im Karwendel. Neben dem Karwendelhaus startet die Route und führt auf die 2.749 Meter hohe Birkkarspitze. Nach dem Gipfelsieg erfolgt der Abstieg ins schöne Hinterautal und weiter bis zum Etappenziel, dem Hallangerhaus.</p>
    <div id="map"></div>

    <script>
        var layers = {
            geolandbasemap: L.tileLayer("https://{s}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapgrau: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapoverlay: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaphidpi: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaphidpi/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaporthofoto30cm: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            osm: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                subdomains: ['a', 'b', 'c'],
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            })
        };

        // Karte definieren
        var map = L.map('map', {
            layers: [layers.geolandbasemap],
            center : [47.654, 13.370],
            zoom : 8
        });

        // Maßstab hinzufügen
        L.control.scale({
            maxWidth: 200,
            metric: true,
            imperial: false
        }).addTo(map);

        // Höhenprofil control hinzufügen
        var profileControl = L.control.elevation({
            position : 'bottomleft',
            theme : 'steelblue-theme'
        });
        profileControl.addTo(map);

        // GPX Track laden
        gpxTrack = omnivore.gpx('data/AdlerwegEtappe11.gpx').addTo(map);

        // nach erfolgreichem Laden Popup hinzufügen, Ausschnitt setzen und Höhenprofil erzeugen
        gpxTrack.on('ready', function () {
            // Popup hinzufügen
            var markup = '<h3> Adlerweg-Etappe 11: Karwendelhaus – Hallerangerhaus</h3>';
            markup += '<p>Hinauf in höchste Höhen führt die alpinistisch anspruchsvollste Adlerweg-Etappe im Karwendel. Neben dem Karwendelhaus startet die Route und führt auf die 2.749 Meter hohe Birkkarspitze. Nach dem Gipfelsieg erfolgt der Abstieg ins schöne Hinterautal und weiter bis zum Etappenziel, dem Hallangerhaus.</p>'
            markup += '<li>Ausgangspunkt: Karwendelhaus</li>';
            markup += '<li>Endpunkt: Hallerangerhaus</li>';
            markup += '<li>Höhenmeter bergauf:1440</li>';
            markup += '<li>Höhenmeter bergab: 1450</li>';
            markup += '<li>Höchster Punkt: 2749</li>';
            markup += '<li>Schwierigkeitsgrad: schwierig</li>';
            markup += '<li>Streckenlänge (in km): 14</li>';
            markup += '<li>Gehzeit (in Stunden): 8</li>';
            markup += '<li>Einkehrmöglichkeiten: Karwendelhaus, Kastenalm, Hallerangerhaus, Hallerangeralm</li>';
            markup += '<li><a href="http://www.tirol.at/reisefuehrer/sport/wandern/wandertouren/a-adlerweg-etappe-11-karwendelhaus-hallerangerhaus">Weitere Informationen</a></li>';
            gpxTrack.bindPopup(markup, { maxWidth : 450 });

            // Ausschnitt setzen
            map.fitBounds(gpxTrack.getBounds());

            // Höhenprofil erzeugen
            gpxTrack.eachLayer(function(layer) {
                profileControl.addData(layer.feature);
				
				//var pts
				console.log(layer.feature.geometry.coordinates)
				var pts = layer.feature.geometry.coordinates;
				
				for (var i = 1; i < pts.length; i += 1) {
				    //console.log(pts[i]);   //aktueller Punkt
					//console.log(pts[i-1]);   //vorhergehender Punkt
					
					//Entfernung best
					var dist = map.distance(
					       [ pts[i][1], pts[i][0]],
						   [ pts[i-1][1], pts[i-1][0] ]
					).toFixed(0);
					//console.log(dist);
					
					var delta = pts[i][2] - pts[i-1][2];
					console.log(delta,"Höhenmeter auf", dist,"m Strecke");
				}
            });
        });

        // WMTS-Layer Auswahl hinzufügen
        var layerControl = L.control.layers({
            "basemap.at - STANDARD": layers.geolandbasemap,
            "basemap.at - GRAU": layers.bmapgrau,
            "basemap.at - OVERLAY": layers.bmapoverlay,
            "basemap.at - HIGH-DPI": layers.bmaphidpi,
            "basemap.at - ORTHOFOTO": layers.bmaporthofoto30cm,
            "OpenStreetMap": layers.osm,
        },{
            "Adlerweg Etappe 11" : gpxTrack
        }).addTo(map);
		
		var huts = [
                 L.marker([47.42724, 11.42161], {title: "Karwendelhaus", icon: L.icon ({iconAnchor: [12, 30], iconUrl: 'icons/huette.png' }) }), //Karwendelhaus 47.42724, 11.42161;; 
				 L.marker([47.36953, 11.43490], {title: "Kastenalm ",icon: L.icon ({iconAnchor: [12, 30], iconUrl: 'icons/huette.png' }) }), //Kastenalm  47.36953, 11.43490
				 L.marker([47.35477, 11.47718], {title: "Hallerangerhaus",icon: L.icon ({iconAnchor: [12, 30], iconUrl: 'icons/huette.png' }) }), //Hallerangerhaus 47.35477, 11.47718
				 L.marker([47.35647, 11.47980], {title: "Hallerangeralm",icon: L.icon ({iconAnchor: [12, 30], iconUrl: 'icons/huette.png' }) })  //Hallerangeralm 47.35647, 11.47980
			];
		var hutsLayer = L.featureGroup(); 
		for (var i=0; i<huts.length; i++) {
			hutsLayer.addLayer(huts[i]);
		}
		// hutsLayer.addTo(map);
		map.on("zoomend", function () {
			if (map.getZoom() >= 15) { 
				map.addLayer(hutsLayer);
			} else { 
				map.removeLayer(hutsLayer); 
			}
		});
		
		var track = [
		         L.marker([47.42728, 11.42170], {title: "Startpunkt der Etappe", icon: L.icon ({iconAnchor: [12, 30], iconUrl: 'icons/start.png' }) }),
				 L.marker([47.35469, 11.47710], {title: "Endpunkt der Etappe", icon: L.icon ({iconAnchor: [12, 30], iconUrl: 'icons/end.png' }) })
		];
		var trackLayer = L.featureGroup();
		for (var i=0; i<track.length; i++) {
		     trackLayer.addLayer(track[i]);
		}
		//startLayer.addTo(map);
		map.on("zoomend", function () {
		       if (map.getZoom () >= 12) {
			         map.addLayer(trackLayer);
			   }
			   else {
			        map.removeLayer(trackLayer);
				}
		});	
    </script>
	
<h3><a href="https://github.com/Raffikossmann/raffikossmann.github.io">Autor: Raffael Kossmann</a></h3>

</body>

</html>
